<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      html,
      body {
        padding: 0px;
        border: 0px;
        margin: 0px;
        height: 100%;
      }
      .container {
        height: 100%;
      }
      #webglCanvas {
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <canvas id="webglCanvas"></canvas>
    </div>
  </body>

  <script type="module">
    import { initWebGL, Flow } from "./index.js";
    const canvasDom = document.getElementById("webglCanvas");
    const gl = initWebGL(canvasDom);
    // const flow = new Flow({
    //   seeding: [
    //     "/flow/texture/mask_100.png",
    //     "/flow/texture/mask_101.png",
    //     "/flow/texture/mask_102.png",
    //     "/flow/texture/mask_103.png",
    //     "/flow/texture/mask_104.png",
    //     "/flow/texture/mask_105.png",
    //     "/flow/texture/mask_106.png",
    //     "/flow/texture/mask_107.png",
    //     "/flow/texture/mask_108.png",
    //     "/flow/texture/mask_109.png",
    //     "/flow/texture/mask_110.png",
    //     "/flow/texture/mask_111.png",
    //     "/flow/texture/mask_112.png",
    //     "/flow/texture/mask_113.png",
    //     "/flow/texture/mask_114.png",
    //     "/flow/texture/mask_115.png",
    //     "/flow/texture/mask_116.png",
    //     "/flow/texture/mask_117.png",
    //     "/flow/texture/mask_118.png",
    //     "/flow/texture/mask_119.png",
    //     "/flow/texture/mask_120.png",
    //     "/flow/texture/mask_121.png",
    //     "/flow/texture/mask_122.png",
    //     "/flow/texture/mask_123.png",
    //     "/flow/texture/mask_124.png",
    //     "/flow/texture/mask_125.png",
    //     "/flow/texture/mask_126.png",
    //   ],
    //   constraints: {
    //     minSpeedFactor: 0.5,
    //     minTrajectoryNum: 4096,
    //     minSegmentNum: 3,
    //     minFillWidth: 1,
    //     minAAWidth: 1,
    //     minFixedDropRate: 0.001,
    //     minExtraDropRate: 0.001,
    //     maxSpeedFactor: 10,
    //     maxTrajectoryNum: 262144,
    //     maxSegmentNum: 16,
    //     maxFillWidth: 25,
    //     maxAAWidth: 5,
    //     maxFixedDropRate: 0.1,
    //     maxExtraDropRate: 0.2,

    //     maxTextureSize: 4096,
    //   },
    //   parameter: {
    //     speedFactor: 2,
    //     tracksNumber: 16384,
    //     segmentNumber: 16,
    //     fillWidth: 1,
    //     aaWidth: 2,
    //     color: 0,
    //     primitive: 0,
    //     fixedDropRate: 0.003,
    //     extraDropRate: 0.002,
    //   },
    //   extent: [0.8334519409367115, 0.4087464036632672, 0.8388303296774701, 0.40586521884815613],
    //   flowBoundary: {
    //     uMax: 2.3461,
    //     uMin: -2.1176,
    //     vMax: 2.0175,
    //     vMin: -1.8959,
    //   },
    //   flowFields: [
    //     "/flow/texture/uv_100.png",
    //     "/flow/texture/uv_101.png",
    //     "/flow/texture/uv_102.png",
    //     "/flow/texture/uv_103.png",
    //     "/flow/texture/uv_104.png",
    //     "/flow/texture/uv_105.png",
    //     "/flow/texture/uv_106.png",
    //     "/flow/texture/uv_107.png",
    //     "/flow/texture/uv_108.png",
    //     "/flow/texture/uv_109.png",
    //     "/flow/texture/uv_110.png",
    //     "/flow/texture/uv_111.png",
    //     "/flow/texture/uv_112.png",
    //     "/flow/texture/uv_113.png",
    //     "/flow/texture/uv_114.png",
    //     "/flow/texture/uv_115.png",
    //     "/flow/texture/uv_116.png",
    //     "/flow/texture/uv_117.png",
    //     "/flow/texture/uv_118.png",
    //     "/flow/texture/uv_119.png",
    //     "/flow/texture/uv_120.png",
    //     "/flow/texture/uv_121.png",
    //     "/flow/texture/uv_122.png",
    //     "/flow/texture/uv_123.png",
    //     "/flow/texture/uv_124.png",
    //     "/flow/texture/uv_125.png",
    //     "/flow/texture/uv_126.png",
    //   ],
    //   projection: "/flow/texture/projection_mapbox.png",
    //   textureSize: {
    //     seeding: [1024, 558],
    //     flowField: [1024, 558],
    //     projection: [1024, 2048],
    //   },
    // });
    // flow.render(gl, null);
    const wind = new Flow({
      seeding: ["/flow/texture/mask_0.png", "/flow/texture/mask_0.png"],
      constraints: {
        minSpeedFactor: 0.5,
        minTrajectoryNum: 4096,
        minSegmentNum: 3,
        minFillWidth: 1,
        minAAWidth: 1,
        minFixedDropRate: 0.001,
        minExtraDropRate: 0.001,
        maxSpeedFactor: 10,
        maxTrajectoryNum: 262144,
        maxSegmentNum: 16,
        maxFillWidth: 25,
        maxAAWidth: 5,
        maxFixedDropRate: 0.1,
        maxExtraDropRate: 0.2,

        maxTextureSize: 4096,
      },
      parameter: {
        speedFactor: 5,
        tracksNumber: 86384,
        segmentNumber: 16,
        fillWidth: 1,
        aaWidth: 2,
        color: 0,
        primitive: 0,
        fixedDropRate: 0.003,
        extraDropRate: 0.002,
      },
      extent: [0.8374743838415425, 0.42819046408647427, 0.8374960543212129, 0.42815421254642927],
      flowBoundary: {
        uMax: 2.04285,
        uMin: -2.46302,
        vMax: 0.776148,
        vMin: -3.39616,
      },
      flowFields: ["/flow/texture/uv_0.png", "/flow/texture/uv_0.png"],
      projection: "/flow/texture/projection_mapbox_0.png",
      textureSize: {
        seeding: [1024, 1551],
        flowField: [1024, 1551],
        projection: [1024, 2048],
      },
    });
    wind.render(gl, null);
  </script>
</html>
